{% extends 'base.html' %}
{% block title %}Upload Journals - University of Tampa CIRT{% endblock %}

{% load static %}
<script src="{% static 'upload_journal.js' %}"></script>


{% block content %}
{% if user.is_authenticated %}
<form id="uploadForm" method="POST" enctype="multipart/form-data" action="/upload-journal/" style="max-width: 600px; margin: 0 auto;">
    {% csrf_token %}
    <h2>Upload a Journal</h2>
    <input type="hidden" name="user_id" value="{{ user.id }}">

    <label for="title">Title</label>
    <input type="text" id="title" name="title" required>

    <label for="description">Description</label>
    <input type="text" id="description" name="description" required>

    <label for="author">Author</label>
    <input type="text" id="author" name="author" required>

    <label for="category">Select Category</label>
    <select id="category" name="category" required>
        <option value="">-- Select a Category --</option>
        {% for category in categories %}
        <option value="{{ category.name }}">{{ category.name }}</option>
        {% endfor %}
    </select>

    <label for="journal">Upload PDF</label>
    <input type="file" id="journal" name="journal" accept="application/pdf" required>

    <button type="submit">Upload</button>
    <div id="statusMessage"></div>
</form>
{% else %}
<div class="dashboard-buttons">Not authorized to visit this page</div>

<style>
    #uploadForm {
        background-color: #f9f9f9;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    #uploadForm h2 {
        color: #a6192e;
        margin-bottom: 20px;
    }

    #uploadForm label {
        display: block;
        margin-top: 15px;
        font-weight: 600;
    }

    #uploadForm input, #uploadForm select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 6px;
        margin-top: 5px;
    }

    #uploadForm button {
        background-color: #a6192e;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        margin-top: 20px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    #uploadForm button:hover {
        background-color: #8c1628;
    }

    #statusMessage {
        margin-top: 15px;
        font-weight: bold;
        color: green;
    }

    .dashboard-buttons {
        color: red;
        text-align: center;
        font-weight: bold;
        margin-top: 50px;
    }
</style>
{% endif %}
{% endblock %}